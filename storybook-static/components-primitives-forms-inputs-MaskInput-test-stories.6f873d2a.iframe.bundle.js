"use strict";(self.webpackChunkpluco_ui_2=self.webpackChunkpluco_ui_2||[]).push([[8206],{"./src/components/primitives/forms/inputs/MaskInput/test.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ShouldChangeCorrectCharacter:()=>ShouldChangeCorrectCharacter,ShouldFillPhoneNumber:()=>ShouldFillPhoneNumber,ShouldHandleBackspace:()=>ShouldHandleBackspace,ShouldHandleDelete:()=>ShouldHandleDelete,ShouldHandleIncompleteValues:()=>ShouldHandleIncompleteValues,ShouldHandleInvalidCharacters:()=>ShouldHandleInvalidCharacters,ShouldHandleLongValues:()=>ShouldHandleLongValues,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.0.0_@babel+core@7.25.9_react-dom@19.0.0-rc-65a56d0e-20241020_react@19.0.0-rc-65a56d0e-20241020/node_modules/next/dist/compiled/react/jsx-runtime.js"),_storybook_test__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@storybook+test@8.3.6_storybook@8.3.6/node_modules/@storybook/test/dist/index.mjs"),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/primitives/forms/inputs/MaskInput/index.tsx"),_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./styled-system/jsx/index.mjs");const __WEBPACK_DEFAULT_EXPORT__={component:___WEBPACK_IMPORTED_MODULE_2__.P,title:"components/primitives/forms/inputs/MaskInput/test"},placeholder="+00 (00) 0000-0000",mask="+99 (99) 9999-9999",ShouldFillPhoneNumber={args:{placeholder,mask},play:async({canvasElement})=>{const input=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement).getByRole("textbox");await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.type(input,"555100000000",{delay:50}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+55 (51) 0000-0000")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__.az,{bg:"bg.surface",p:"8",rounded:"md",shadow:"md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},ShouldHandleBackspace={args:{placeholder,mask},play:async({canvasElement})=>{const input=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement).getByRole("textbox");await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.click(input),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("555100000000"),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("{Backspace>12}",{delay:50}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+__ (__) ____-____")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__.az,{bg:"bg.surface",p:"8",rounded:"md",shadow:"md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},ShouldHandleDelete={args:{placeholder,mask},play:async({canvasElement})=>{const input=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement).getByRole("textbox");await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.click(input),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("555100000000"),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("{ArrowLeft>2}",{delay:50}),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("{Delete>2}",{delay:50}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+55 (51) 0000-00__")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__.az,{bg:"bg.surface",p:"8",rounded:"md",shadow:"md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},ShouldHandleIncompleteValues={args:{placeholder,mask,onBlur:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.fn)()},play:async({canvasElement})=>{const input=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement).getByRole("textbox");await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.type(input,"555100",{delay:50}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+55 (51) 00__-____"),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.tab(),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).not.toHaveFocus(),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.tab({shift:!0}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveFocus(),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.fm)((()=>(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+__ (__) ____-____")))},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__.az,{bg:"bg.surface",p:"8",rounded:"md",shadow:"md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},ShouldHandleInvalidCharacters={args:{placeholder,mask},play:async({canvasElement})=>{const input=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement).getByRole("textbox");await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.type(input,"5551aaa00000000",{delay:50}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+55 (51) 0000-0000")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__.az,{bg:"bg.surface",p:"8",rounded:"md",shadow:"md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},ShouldHandleLongValues={args:{placeholder,mask},play:async({canvasElement})=>{const input=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement).getByRole("textbox");await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.type(input,"5551000000000000000000000000000000000",{delay:50}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+55 (51) 0000-0000")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__.az,{bg:"bg.surface",p:"8",rounded:"md",shadow:"md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},ShouldChangeCorrectCharacter={args:{placeholder,mask},play:async({canvasElement})=>{const input=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement).getByRole("textbox");await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.click(input),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("555100000000"),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("{ArrowLeft>1}",{delay:50}),await _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.keyboard("1",{delay:50}),await(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(input).toHaveValue("+55 (51) 0000-0001")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_styled_system_jsx__WEBPACK_IMPORTED_MODULE_3__.az,{bg:"bg.surface",p:"8",rounded:"md",shadow:"md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},__namedExportsOrder=["ShouldFillPhoneNumber","ShouldHandleBackspace","ShouldHandleDelete","ShouldHandleIncompleteValues","ShouldHandleInvalidCharacters","ShouldHandleLongValues","ShouldChangeCorrectCharacter"];ShouldFillPhoneNumber.parameters={...ShouldFillPhoneNumber.parameters,docs:{...ShouldFillPhoneNumber.parameters?.docs,source:{originalSource:'{\n  args: {\n    placeholder,\n    mask\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByRole(\'textbox\');\n    await userEvent.type(input, phoneNumber, {\n      delay: 50\n    });\n    await expect(input).toHaveValue(expectedValue);\n  },\n  decorators: [Story => <Box bg="bg.surface" p="8" rounded="md" shadow="md">\n        <Story />\n      </Box>]\n}',...ShouldFillPhoneNumber.parameters?.docs?.source}}},ShouldHandleBackspace.parameters={...ShouldHandleBackspace.parameters,docs:{...ShouldHandleBackspace.parameters?.docs,source:{originalSource:'{\n  args: {\n    placeholder,\n    mask\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByRole(\'textbox\');\n    await userEvent.click(input);\n    await userEvent.keyboard(phoneNumber);\n    await userEvent.keyboard(\'{Backspace>12}\', {\n      delay: 50\n    });\n    await expect(input).toHaveValue(emptyValue);\n  },\n  decorators: [Story => <Box bg="bg.surface" p="8" rounded="md" shadow="md">\n        <Story />\n      </Box>]\n}',...ShouldHandleBackspace.parameters?.docs?.source}}},ShouldHandleDelete.parameters={...ShouldHandleDelete.parameters,docs:{...ShouldHandleDelete.parameters?.docs,source:{originalSource:'{\n  args: {\n    placeholder,\n    mask\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByRole(\'textbox\');\n    await userEvent.click(input);\n    await userEvent.keyboard(phoneNumber);\n    await userEvent.keyboard(\'{ArrowLeft>2}\', {\n      delay: 50\n    });\n    await userEvent.keyboard(\'{Delete>2}\', {\n      delay: 50\n    });\n    await expect(input).toHaveValue(deletedNumber);\n  },\n  decorators: [Story => <Box bg="bg.surface" p="8" rounded="md" shadow="md">\n        <Story />\n      </Box>]\n}',...ShouldHandleDelete.parameters?.docs?.source}}},ShouldHandleIncompleteValues.parameters={...ShouldHandleIncompleteValues.parameters,docs:{...ShouldHandleIncompleteValues.parameters?.docs,source:{originalSource:'{\n  args: {\n    placeholder,\n    mask,\n    onBlur: fn()\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByRole(\'textbox\');\n    await userEvent.type(input, incompleteNumber, {\n      delay: 50\n    });\n    await expect(input).toHaveValue(expectedIncompleteNumber);\n    await userEvent.tab();\n    await expect(input).not.toHaveFocus();\n    await userEvent.tab({\n      shift: true\n    });\n    await expect(input).toHaveFocus();\n    await waitFor(() => expect(input).toHaveValue(emptyValue));\n  },\n  decorators: [Story => <Box bg="bg.surface" p="8" rounded="md" shadow="md">\n        <Story />\n      </Box>]\n}',...ShouldHandleIncompleteValues.parameters?.docs?.source}}},ShouldHandleInvalidCharacters.parameters={...ShouldHandleInvalidCharacters.parameters,docs:{...ShouldHandleInvalidCharacters.parameters?.docs,source:{originalSource:'{\n  args: {\n    placeholder,\n    mask\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByRole(\'textbox\');\n    await userEvent.type(input, phoneNumberWithInvalidCharacters, {\n      delay: 50\n    });\n    await expect(input).toHaveValue(expectedValue);\n  },\n  decorators: [Story => <Box bg="bg.surface" p="8" rounded="md" shadow="md">\n        <Story />\n      </Box>]\n}',...ShouldHandleInvalidCharacters.parameters?.docs?.source}}},ShouldHandleLongValues.parameters={...ShouldHandleLongValues.parameters,docs:{...ShouldHandleLongValues.parameters?.docs,source:{originalSource:'{\n  args: {\n    placeholder,\n    mask\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByRole(\'textbox\');\n    await userEvent.type(input, comicallyLongPhoneNumber, {\n      delay: 50\n    });\n    await expect(input).toHaveValue(expectedValue);\n  },\n  decorators: [Story => <Box bg="bg.surface" p="8" rounded="md" shadow="md">\n        <Story />\n      </Box>]\n}',...ShouldHandleLongValues.parameters?.docs?.source}}},ShouldChangeCorrectCharacter.parameters={...ShouldChangeCorrectCharacter.parameters,docs:{...ShouldChangeCorrectCharacter.parameters?.docs,source:{originalSource:'{\n  args: {\n    placeholder,\n    mask\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const input = canvas.getByRole(\'textbox\');\n    await userEvent.click(input);\n    await userEvent.keyboard(phoneNumber);\n    await userEvent.keyboard(\'{ArrowLeft>1}\', {\n      delay: 50\n    });\n    await userEvent.keyboard(\'1\', {\n      delay: 50\n    });\n    await expect(input).toHaveValue(singleChangedCharacter);\n  },\n  decorators: [Story => <Box bg="bg.surface" p="8" rounded="md" shadow="md">\n        <Story />\n      </Box>]\n}',...ShouldChangeCorrectCharacter.parameters?.docs?.source}}}},"./src/components/primitives/forms/inputs/Input/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>Input_Input});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.0.0_@babel+core@7.25.9_react-dom@19.0.0-rc-65a56d0e-20241020_react@19.0.0-rc-65a56d0e-20241020/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.0.0_@babel+core@7.25.9_react-dom@19.0.0-rc-65a56d0e-20241020_react@19.0.0-rc-65a56d0e-20241020/node_modules/next/dist/compiled/react/index.js"),jsx=__webpack_require__("./styled-system/jsx/index.mjs");const InputOuterContainer=(0,jsx.I4)("div",{base:{display:"flex",align:"center"}}),InputContainer=(0,jsx.I4)("label",{base:{maxW:"full",bg:"bg.surface",boxShadow:"sm",transition:"0.2s",cursor:"text",display:"flex",align:"center",gap:"2",borderWidth:"1px",borderColor:{base:"border",_focusWithin:"border.brand",_invalidWithin:"border.danger"},"&:has(:disabled)":{bg:"bg.disabled",borderColor:"border.disabled",cursor:"not-allowed"},rounded:"md",".input-outer-container > &":{"&:not(:first-child)":{borderStartRadius:"0px"},"&:not(:last-child)":{borderEndRadius:"0px"}}},variants:{size:{xs:{px:"1",h:"8"},sm:{px:"2",h:"9"},md:{px:"3",h:"10"},lg:{px:"4",h:"11"}},full:{true:{w:"full"},false:{w:"max-content"}}},defaultVariants:{full:!0,size:"md"}}),Input=(0,jsx.I4)("input",{base:{maxW:"full",w:"full",bg:"transparent",color:"fg",fontSize:"sm",outline:"none",_placeholder:{color:"fg.unimportant",fontSize:"sm",userSelect:"none"},_disabled:{cursor:"not-allowed",color:"fg.disabled","&::placeholder":{color:"fg.disabled"}},_autofill:{boxShadow:"0 0 0px 1000px token(colors.bg.surface) inset",WebkitTextFillColor:"token(colors.fg)",caretColor:"fg"},transition:"border-color 0.2s"}}),InputAditionalElement=(0,jsx.I4)("div",{base:{"& svg":{transition:"0.2s"},".group:has(:disabled) &":{iconColor:"fg.disabled"},'.group:has([aria-invalid="true"]) &':{iconColor:"border.danger"},".group:has(:focus-within) &":{iconColor:"border.brand"}}}),InputAddon=(0,jsx.I4)("div",{base:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap",textStyle:"bodySm",userSelect:"none",color:"fg.unimportant",bg:"bg.surface.hovered",borderWidth:"1px",borderColor:"border"},variants:{size:{xs:{px:"1",h:"8"},sm:{px:"2",h:"9"},md:{px:"3",h:"10"},lg:{px:"4",h:"11"}},side:{start:{borderStartRadius:"md",borderEndWidth:"0px"},end:{borderEndRadius:"md",borderStartWidth:"0px"}}},defaultVariants:{size:"md",side:"start"}}),Input_Input=({size,full,startAddon,endAddon,startElement,endElement,...props})=>{const OuterContainer=startAddon||endAddon?InputOuterContainer:react.Fragment;return(0,jsx_runtime.jsxs)(OuterContainer,{...(startAddon||endAddon)&&{className:"input-outer-container"},children:[startAddon&&(0,jsx_runtime.jsx)(InputAddon,{side:"start",children:startAddon}),(0,jsx_runtime.jsxs)(InputContainer,{size,full,className:"group",children:[startElement&&(0,jsx_runtime.jsx)(InputAditionalElement,{children:startElement}),(0,jsx_runtime.jsx)(Input,{...props}),endElement&&(0,jsx_runtime.jsx)(InputAditionalElement,{children:endElement})]}),endAddon&&(0,jsx_runtime.jsx)(InputAddon,{side:"end",children:endAddon})]})};Input_Input.__docgenInfo={description:"",methods:[],displayName:"Input"}},"./src/components/primitives/forms/inputs/MaskInput/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>MaskInput});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.0.0_@babel+core@7.25.9_react-dom@19.0.0-rc-65a56d0e-20241020_react@19.0.0-rc-65a56d0e-20241020/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.0.0_@babel+core@7.25.9_react-dom@19.0.0-rc-65a56d0e-20241020_react@19.0.0-rc-65a56d0e-20241020/node_modules/next/dist/compiled/react/index.js"),_Input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/primitives/forms/inputs/Input/index.tsx");const MaskInput=({onChange,onFocus,onBlur,onKeyDown,mask,slotChar="_",autoClear=!0,...props})=>{const internalRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),firstNonMaskPos=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),lastRequiredNonMaskPos=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0),tests=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]),buffer=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]),length=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0),oldVal=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),focus=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1),focusText=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),isValueChecked=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),partialPosition=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),defaultBuffer=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),caretTimeoutId=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),selectionRange=(first,last)=>{let begin,end;const inputEl=internalRef.current;return inputEl&&inputEl.offsetParent&&inputEl===document.activeElement?("number"==typeof first&&(begin=first,end="number"==typeof last?last:begin,inputEl.setSelectionRange(begin,end)),begin=inputEl.selectionStart,end=inputEl.selectionEnd,{begin,end}):null},getPlaceholder=i=>i<slotChar.length?slotChar.charAt(i):slotChar.charAt(0),seekNext=position=>{for(position++;position<length.current&&!tests.current[position];)position++;return position},clearBuffer=(start,end)=>{let i;for(i=start;i<end&&i<length.current;i++)tests.current[i]&&(buffer.current[i]=getPlaceholder(i))},writeBuffer=()=>{internalRef.current&&(internalRef.current.value=buffer.current.join(""))},checkVal=allow=>{isValueChecked.current=!0;const test=internalRef.current&&internalRef.current.value;let i,c,pos,lastMatch=-1;if("string"==typeof test)for(i=0,pos=0;i<length.current;i++){const currentTest=tests.current[i];if(currentTest){for(buffer.current[i]=getPlaceholder(i);pos++<test.length;)if(c=test.charAt(pos-1),currentTest.test(c)){buffer.current[i]=c,lastMatch=i;break}if(pos>test.length){clearBuffer(i+1,length.current);break}}else buffer.current[i]===test.charAt(pos)&&pos++,partialPosition.current&&i<(null==partialPosition?void 0:partialPosition.current)&&(lastMatch=i)}return allow?writeBuffer():partialPosition.current&&lastMatch+1<partialPosition.current?autoClear||buffer.current.join("")===defaultBuffer.current?(internalRef.current&&internalRef.current.value&&(internalRef.current.value=""),clearBuffer(0,length.current)):writeBuffer():(writeBuffer(),internalRef.current&&(internalRef.current.value=internalRef.current.value.substring(0,lastMatch+1))),partialPosition.current?i:firstNonMaskPos.current},updateModel=e=>{if(onChange){const val=e&&e.target.value;onChange({...e,target:{...e.target,value:defaultBuffer.current!==val?val:""}})}},maskOnBlur=e=>{if(focus.current=!1,checkVal(),updateModel(e),onBlur&&onBlur(e),internalRef.current&&internalRef.current.value!==focusText.current){const event=document.createEvent("HTMLEvents");event.initEvent("change",!0,!1),internalRef.current.dispatchEvent(event)}},handleInputChange=(e,isOnPaste=!1)=>{if(!props.readOnly){if(!isOnPaste){const position=checkVal(!0);selectionRange(position||0)}updateModel(e)}},_onChange=mask?e=>{if(onChange)return onChange(e)}:onChange,_onFocus=mask?e=>{if(props.readOnly)return;focus.current=!0,caretTimeoutId.current&&clearTimeout(caretTimeoutId.current),internalRef.current?focusText.current=internalRef.current.value:focusText.current="";const position=checkVal()||0;caretTimeoutId.current=setTimeout((()=>{internalRef.current===document.activeElement&&(writeBuffer(),mask&&position===mask.replace("?","").length?selectionRange(0,position):selectionRange(position))}),100),onFocus&&onFocus(e)}:onFocus,_onBlur=mask?maskOnBlur:onBlur,_onKeyDown=mask?e=>{var _internalRef_current;if(props.readOnly)return;const code=e.code;let position,begin,end;if(oldVal.current=(null===(_internalRef_current=internalRef.current)||void 0===_internalRef_current?void 0:_internalRef_current.value)||"","Backspace"===code||"Delete"===code){if(position=selectionRange(),!position)return;begin=position.begin||0,end=position.end||begin,end-begin==0&&(begin="Delete"!==code?(position=>{for(position--;position>=0&&!tests.current[position];)position--;return position})(begin):end=seekNext(begin-1),end="Delete"===code?seekNext(end):end),clearBuffer(begin,end),((begin,end)=>{let i,j;if(!(begin<0)){for(i=begin,j=seekNext(end);i<length.current;i++){const currentTest=tests.current[i];if(currentTest){if(!(j<length.current&&currentTest.test(buffer.current[j])))break;buffer.current[i]=buffer.current[j],buffer.current[j]=getPlaceholder(j),j=seekNext(j)}}writeBuffer(),"number"==typeof firstNonMaskPos.current&&selectionRange(Math.max(firstNonMaskPos.current,begin))}})(begin,end-1),updateModel(e),e.preventDefault()}else"Enter"===code?(maskOnBlur(e),updateModel(e)):"Escape"===code&&(internalRef.current&&(internalRef.current.value=focusText.current||""),selectionRange(0,checkVal()||0),updateModel(e),e.preventDefault())}:onKeyDown;return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{(()=>{if(mask){tests.current=[],partialPosition.current=mask.length,length.current=mask.length,firstNonMaskPos.current=null;const defs={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},maskTokens=mask.split("");for(let i=0;i<maskTokens.length;i++){const c=maskTokens[i];"?"===c?(length.current--,partialPosition.current=i):defs[c]?(tests.current.push(new RegExp(defs[c])),null===firstNonMaskPos.current&&(firstNonMaskPos.current=tests.current.length-1),i<partialPosition.current&&(lastRequiredNonMaskPos.current=tests.current.length-1)):tests.current.push(null)}buffer.current=[];for(let i=0;i<maskTokens.length;i++){const c=maskTokens[i];"?"!==c&&(defs[c]?buffer.current.push(getPlaceholder(i)):buffer.current.push(c))}defaultBuffer.current=buffer.current.join("")}})(),(allow=>{let pos;internalRef.current&&(null==props.value?internalRef.current.value="":(internalRef.current.value=String(props.value),pos=checkVal(allow),setTimeout((()=>{if(internalRef.current)return writeBuffer(),checkVal(allow)}),10)),focusText.current=internalRef.current.value)})()}),[mask]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Input__WEBPACK_IMPORTED_MODULE_2__.p,{onChange:_onChange,onFocus:_onFocus,onBlur:_onBlur,onKeyDown:_onKeyDown,onPaste:e=>handleInputChange(e,!0),onInput:handleInputChange,...props,ref:internalRef})};MaskInput.__docgenInfo={description:"",methods:[],displayName:"MaskInput",props:{slotChar:{defaultValue:{value:"'_'",computed:!1},required:!1},autoClear:{defaultValue:{value:"true",computed:!1},required:!1}}}}}]);